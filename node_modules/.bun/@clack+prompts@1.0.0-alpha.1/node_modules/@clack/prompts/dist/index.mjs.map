{"version":3,"file":"index.mjs","sources":["../../../node_modules/.pnpm/is-unicode-supported@1.3.0/node_modules/is-unicode-supported/index.js","../src/common.ts","../src/limit-options.ts","../src/autocomplete.ts","../src/confirm.ts","../src/group-multi-select.ts","../src/group.ts","../src/log.ts","../src/messages.ts","../src/multi-select.ts","../src/note.ts","../src/password.ts","../src/path.ts","../src/spinner.ts","../src/progress-bar.ts","../src/select-key.ts","../src/select.ts","../src/stream.ts","../src/task.ts","../src/task-log.ts","../src/text.ts"],"sourcesContent":["import process from 'node:process';\n\nexport default function isUnicodeSupported() {\n\tif (process.platform !== 'win32') {\n\t\treturn process.env.TERM !== 'linux'; // Linux console (kernel)\n\t}\n\n\treturn Boolean(process.env.CI)\n\t\t|| Boolean(process.env.WT_SESSION) // Windows Terminal\n\t\t|| Boolean(process.env.TERMINUS_SUBLIME) // Terminus (<0.2.27)\n\t\t|| process.env.ConEmuTask === '{cmd::Cmder}' // ConEmu and cmder\n\t\t|| process.env.TERM_PROGRAM === 'Terminus-Sublime'\n\t\t|| process.env.TERM_PROGRAM === 'vscode'\n\t\t|| process.env.TERM === 'xterm-256color'\n\t\t|| process.env.TERM === 'alacritty'\n\t\t|| process.env.TERMINAL_EMULATOR === 'JetBrains-JediTerm';\n}\n","import type { Readable, Writable } from 'node:stream';\nimport type { State } from '@clack/core';\nimport isUnicodeSupported from 'is-unicode-supported';\nimport color from 'picocolors';\n\nexport const unicode = isUnicodeSupported();\nexport const isCI = (): boolean => process.env.CI === 'true';\nexport const unicodeOr = (c: string, fallback: string) => (unicode ? c : fallback);\nexport const S_STEP_ACTIVE = unicodeOr('◆', '*');\nexport const S_STEP_CANCEL = unicodeOr('■', 'x');\nexport const S_STEP_ERROR = unicodeOr('▲', 'x');\nexport const S_STEP_SUBMIT = unicodeOr('◇', 'o');\n\nexport const S_BAR_START = unicodeOr('┌', 'T');\nexport const S_BAR = unicodeOr('│', '|');\nexport const S_BAR_END = unicodeOr('└', '—');\n\nexport const S_RADIO_ACTIVE = unicodeOr('●', '>');\nexport const S_RADIO_INACTIVE = unicodeOr('○', ' ');\nexport const S_CHECKBOX_ACTIVE = unicodeOr('◻', '[•]');\nexport const S_CHECKBOX_SELECTED = unicodeOr('◼', '[+]');\nexport const S_CHECKBOX_INACTIVE = unicodeOr('◻', '[ ]');\nexport const S_PASSWORD_MASK = unicodeOr('▪', '•');\n\nexport const S_BAR_H = unicodeOr('─', '-');\nexport const S_CORNER_TOP_RIGHT = unicodeOr('╮', '+');\nexport const S_CONNECT_LEFT = unicodeOr('├', '+');\nexport const S_CORNER_BOTTOM_RIGHT = unicodeOr('╯', '+');\n\nexport const S_INFO = unicodeOr('●', '•');\nexport const S_SUCCESS = unicodeOr('◆', '*');\nexport const S_WARN = unicodeOr('▲', '!');\nexport const S_ERROR = unicodeOr('■', 'x');\n\nexport const symbol = (state: State) => {\n\tswitch (state) {\n\t\tcase 'initial':\n\t\tcase 'active':\n\t\t\treturn color.cyan(S_STEP_ACTIVE);\n\t\tcase 'cancel':\n\t\t\treturn color.red(S_STEP_CANCEL);\n\t\tcase 'error':\n\t\t\treturn color.yellow(S_STEP_ERROR);\n\t\tcase 'submit':\n\t\t\treturn color.green(S_STEP_SUBMIT);\n\t}\n};\n\nexport interface CommonOptions {\n\tinput?: Readable;\n\toutput?: Writable;\n\tsignal?: AbortSignal;\n}\n","import type { Writable } from 'node:stream';\nimport { WriteStream } from 'node:tty';\nimport color from 'picocolors';\nimport type { CommonOptions } from './common.js';\n\nexport interface LimitOptionsParams<TOption> extends CommonOptions {\n\toptions: TOption[];\n\tmaxItems: number | undefined;\n\tcursor: number;\n\tstyle: (option: TOption, active: boolean) => string;\n}\n\nexport const limitOptions = <TOption>(params: LimitOptionsParams<TOption>): string[] => {\n\tconst { cursor, options, style } = params;\n\tconst output: Writable = params.output ?? process.stdout;\n\tconst rows = output instanceof WriteStream && output.rows !== undefined ? output.rows : 10;\n\tconst overflowFormat = color.dim('...');\n\n\tconst paramMaxItems = params.maxItems ?? Number.POSITIVE_INFINITY;\n\tconst outputMaxItems = Math.max(rows - 4, 0);\n\t// We clamp to minimum 5 because anything less doesn't make sense UX wise\n\tconst maxItems = Math.min(outputMaxItems, Math.max(paramMaxItems, 5));\n\tlet slidingWindowLocation = 0;\n\n\tif (cursor >= slidingWindowLocation + maxItems - 3) {\n\t\tslidingWindowLocation = Math.max(Math.min(cursor - maxItems + 3, options.length - maxItems), 0);\n\t} else if (cursor < slidingWindowLocation + 2) {\n\t\tslidingWindowLocation = Math.max(cursor - 2, 0);\n\t}\n\n\tconst shouldRenderTopEllipsis = maxItems < options.length && slidingWindowLocation > 0;\n\tconst shouldRenderBottomEllipsis =\n\t\tmaxItems < options.length && slidingWindowLocation + maxItems < options.length;\n\n\treturn options\n\t\t.slice(slidingWindowLocation, slidingWindowLocation + maxItems)\n\t\t.map((option, i, arr) => {\n\t\t\tconst isTopLimit = i === 0 && shouldRenderTopEllipsis;\n\t\t\tconst isBottomLimit = i === arr.length - 1 && shouldRenderBottomEllipsis;\n\t\t\treturn isTopLimit || isBottomLimit\n\t\t\t\t? overflowFormat\n\t\t\t\t: style(option, i + slidingWindowLocation === cursor);\n\t\t});\n};\n","import { AutocompletePrompt } from '@clack/core';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_END,\n\tS_CHECKBOX_INACTIVE,\n\tS_CHECKBOX_SELECTED,\n\tS_RADIO_ACTIVE,\n\tS_RADIO_INACTIVE,\n\tsymbol,\n} from './common.js';\nimport { limitOptions } from './limit-options.js';\nimport type { Option } from './select.js';\n\nfunction getLabel<T>(option: Option<T>) {\n\treturn option.label ?? String(option.value ?? '');\n}\n\nfunction getFilteredOption<T>(searchText: string, option: Option<T>): boolean {\n\tif (!searchText) {\n\t\treturn true;\n\t}\n\tconst label = (option.label ?? String(option.value ?? '')).toLowerCase();\n\tconst hint = (option.hint ?? '').toLowerCase();\n\tconst value = String(option.value).toLowerCase();\n\tconst term = searchText.toLowerCase();\n\n\treturn label.includes(term) || hint.includes(term) || value.includes(term);\n}\n\nfunction getSelectedOptions<T>(values: T[], options: Option<T>[]): Option<T>[] {\n\tconst results: Option<T>[] = [];\n\n\tfor (const option of options) {\n\t\tif (values.includes(option.value)) {\n\t\t\tresults.push(option);\n\t\t}\n\t}\n\n\treturn results;\n}\n\ninterface AutocompleteSharedOptions<Value> extends CommonOptions {\n\t/**\n\t * The message to display to the user.\n\t */\n\tmessage: string;\n\t/**\n\t * Available options for the autocomplete prompt.\n\t */\n\toptions: Option<Value>[] | ((this: AutocompletePrompt<Option<Value>>) => Option<Value>[]);\n\t/**\n\t * Maximum number of items to display at once.\n\t */\n\tmaxItems?: number;\n\t/**\n\t * Placeholder text to display when no input is provided.\n\t */\n\tplaceholder?: string;\n\t/**\n\t * Validates the value\n\t */\n\tvalidate?: (value: Value | Value[] | undefined) => string | Error | undefined;\n}\n\nexport interface AutocompleteOptions<Value> extends AutocompleteSharedOptions<Value> {\n\t/**\n\t * The initial selected value.\n\t */\n\tinitialValue?: Value;\n\t/**\n\t * The initial user input\n\t */\n\tinitialUserInput?: string;\n}\n\nexport const autocomplete = <Value>(opts: AutocompleteOptions<Value>) => {\n\tconst prompt = new AutocompletePrompt({\n\t\toptions: opts.options,\n\t\tinitialValue: opts.initialValue ? [opts.initialValue] : undefined,\n\t\tinitialUserInput: opts.initialUserInput,\n\t\tfilter: (search: string, opt: Option<Value>) => {\n\t\t\treturn getFilteredOption(search, opt);\n\t\t},\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tvalidate: opts.validate,\n\t\trender() {\n\t\t\t// Title and message display\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst userInput = this.userInput;\n\t\t\tconst valueAsString = String(this.value ?? '');\n\t\t\tconst options = this.options;\n\t\t\tconst placeholder = opts.placeholder;\n\t\t\tconst showPlaceholder = valueAsString === '' && placeholder !== undefined;\n\n\t\t\t// Handle different states\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit': {\n\t\t\t\t\t// Show selected value\n\t\t\t\t\tconst selected = getSelectedOptions(this.selectedValues, options);\n\t\t\t\t\tconst label = selected.length > 0 ? selected.map(getLabel).join(', ') : '';\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.dim(label)}`;\n\t\t\t\t}\n\n\t\t\t\tcase 'cancel': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.strikethrough(color.dim(userInput))}`;\n\t\t\t\t}\n\n\t\t\t\tdefault: {\n\t\t\t\t\t// Display cursor position - show plain text in navigation mode\n\t\t\t\t\tconst searchText =\n\t\t\t\t\t\tthis.isNavigating || showPlaceholder\n\t\t\t\t\t\t\t? color.dim(showPlaceholder ? placeholder : userInput)\n\t\t\t\t\t\t\t: this.userInputWithCursor;\n\n\t\t\t\t\t// Show match count if filtered\n\t\t\t\t\tconst matches =\n\t\t\t\t\t\tthis.filteredOptions.length !== options.length\n\t\t\t\t\t\t\t? color.dim(\n\t\t\t\t\t\t\t\t\t` (${this.filteredOptions.length} match${this.filteredOptions.length === 1 ? '' : 'es'})`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t// Render options with selection\n\t\t\t\t\tconst displayOptions =\n\t\t\t\t\t\tthis.filteredOptions.length === 0\n\t\t\t\t\t\t\t? []\n\t\t\t\t\t\t\t: limitOptions({\n\t\t\t\t\t\t\t\t\tcursor: this.cursor,\n\t\t\t\t\t\t\t\t\toptions: this.filteredOptions,\n\t\t\t\t\t\t\t\t\tstyle: (option, active) => {\n\t\t\t\t\t\t\t\t\t\tconst label = getLabel(option);\n\t\t\t\t\t\t\t\t\t\tconst hint =\n\t\t\t\t\t\t\t\t\t\t\toption.hint && option.value === this.focusedValue\n\t\t\t\t\t\t\t\t\t\t\t\t? color.dim(` (${option.hint})`)\n\t\t\t\t\t\t\t\t\t\t\t\t: '';\n\n\t\t\t\t\t\t\t\t\t\treturn active\n\t\t\t\t\t\t\t\t\t\t\t? `${color.green(S_RADIO_ACTIVE)} ${label}${hint}`\n\t\t\t\t\t\t\t\t\t\t\t: `${color.dim(S_RADIO_INACTIVE)} ${color.dim(label)}${hint}`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tmaxItems: opts.maxItems,\n\t\t\t\t\t\t\t\t\toutput: opts.output,\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t// Show instructions\n\t\t\t\t\tconst instructions = [\n\t\t\t\t\t\t`${color.dim('↑/↓')} to select`,\n\t\t\t\t\t\t`${color.dim('Enter:')} confirm`,\n\t\t\t\t\t\t`${color.dim('Type:')} to search`,\n\t\t\t\t\t];\n\n\t\t\t\t\t// No matches message\n\t\t\t\t\tconst noResults =\n\t\t\t\t\t\tthis.filteredOptions.length === 0 && userInput\n\t\t\t\t\t\t\t? [`${color.cyan(S_BAR)}  ${color.yellow('No matches found')}`]\n\t\t\t\t\t\t\t: [];\n\n\t\t\t\t\tconst validationError =\n\t\t\t\t\t\tthis.state === 'error' ? [`${color.yellow(S_BAR)}  ${color.yellow(this.error)}`] : [];\n\n\t\t\t\t\t// Return the formatted prompt\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t`${color.cyan(S_BAR)}  ${color.dim('Search:')} ${searchText}${matches}`,\n\t\t\t\t\t\t...noResults,\n\t\t\t\t\t\t...validationError,\n\t\t\t\t\t\t...displayOptions.map((option) => `${color.cyan(S_BAR)}  ${option}`),\n\t\t\t\t\t\t`${color.cyan(S_BAR)}  ${color.dim(instructions.join(' • '))}`,\n\t\t\t\t\t\t`${color.cyan(S_BAR_END)}`,\n\t\t\t\t\t].join('\\n');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n\n\t// Return the result or cancel symbol\n\treturn prompt.prompt() as Promise<Value | symbol>;\n};\n\n// Type definition for the autocompleteMultiselect component\nexport interface AutocompleteMultiSelectOptions<Value> extends AutocompleteSharedOptions<Value> {\n\t/**\n\t * The initial selected values\n\t */\n\tinitialValues?: Value[];\n\t/**\n\t * If true, at least one option must be selected\n\t */\n\trequired?: boolean;\n}\n\n/**\n * Integrated autocomplete multiselect - combines type-ahead filtering with multiselect in one UI\n */\nexport const autocompleteMultiselect = <Value>(opts: AutocompleteMultiSelectOptions<Value>) => {\n\tconst formatOption = (\n\t\toption: Option<Value>,\n\t\tactive: boolean,\n\t\tselectedValues: Value[],\n\t\tfocusedValue: Value | undefined\n\t) => {\n\t\tconst isSelected = selectedValues.includes(option.value);\n\t\tconst label = option.label ?? String(option.value ?? '');\n\t\tconst hint =\n\t\t\toption.hint && focusedValue !== undefined && option.value === focusedValue\n\t\t\t\t? color.dim(` (${option.hint})`)\n\t\t\t\t: '';\n\t\tconst checkbox = isSelected ? color.green(S_CHECKBOX_SELECTED) : color.dim(S_CHECKBOX_INACTIVE);\n\n\t\tif (active) {\n\t\t\treturn `${checkbox} ${label}${hint}`;\n\t\t}\n\t\treturn `${checkbox} ${color.dim(label)}`;\n\t};\n\n\t// Create text prompt which we'll use as foundation\n\tconst prompt = new AutocompletePrompt<Option<Value>>({\n\t\toptions: opts.options,\n\t\tmultiple: true,\n\t\tfilter: (search, opt) => {\n\t\t\treturn getFilteredOption(search, opt);\n\t\t},\n\t\tvalidate: () => {\n\t\t\tif (opts.required && prompt.selectedValues.length === 0) {\n\t\t\t\treturn 'Please select at least one item';\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\tinitialValue: opts.initialValues,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\trender() {\n\t\t\t// Title and symbol\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\n\t\t\t// Selection counter\n\t\t\tconst userInput = this.userInput;\n\t\t\tconst placeholder = opts.placeholder;\n\t\t\tconst showPlaceholder = userInput === '' && placeholder !== undefined;\n\n\t\t\t// Search input display\n\t\t\tconst searchText =\n\t\t\t\tthis.isNavigating || showPlaceholder\n\t\t\t\t\t? color.dim(showPlaceholder ? placeholder : userInput) // Just show plain text when in navigation mode\n\t\t\t\t\t: this.userInputWithCursor;\n\n\t\t\tconst options = this.options;\n\n\t\t\tconst matches =\n\t\t\t\tthis.filteredOptions.length !== options.length\n\t\t\t\t\t? color.dim(\n\t\t\t\t\t\t\t` (${this.filteredOptions.length} match${this.filteredOptions.length === 1 ? '' : 'es'})`\n\t\t\t\t\t\t)\n\t\t\t\t\t: '';\n\n\t\t\t// Render prompt state\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.dim(`${this.selectedValues.length} items selected`)}`;\n\t\t\t\t}\n\t\t\t\tcase 'cancel': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.strikethrough(color.dim(userInput))}`;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\t// Instructions\n\t\t\t\t\tconst instructions = [\n\t\t\t\t\t\t`${color.dim('↑/↓')} to navigate`,\n\t\t\t\t\t\t`${color.dim('Space:')} select`,\n\t\t\t\t\t\t`${color.dim('Enter:')} confirm`,\n\t\t\t\t\t\t`${color.dim('Type:')} to search`,\n\t\t\t\t\t];\n\n\t\t\t\t\t// No results message\n\t\t\t\t\tconst noResults =\n\t\t\t\t\t\tthis.filteredOptions.length === 0 && userInput\n\t\t\t\t\t\t\t? [`${color.cyan(S_BAR)}  ${color.yellow('No matches found')}`]\n\t\t\t\t\t\t\t: [];\n\n\t\t\t\t\tconst errorMessage =\n\t\t\t\t\t\tthis.state === 'error' ? [`${color.cyan(S_BAR)}  ${color.yellow(this.error)}`] : [];\n\n\t\t\t\t\t// Get limited options for display\n\t\t\t\t\tconst displayOptions = limitOptions({\n\t\t\t\t\t\tcursor: this.cursor,\n\t\t\t\t\t\toptions: this.filteredOptions,\n\t\t\t\t\t\tstyle: (option, active) =>\n\t\t\t\t\t\t\tformatOption(option, active, this.selectedValues, this.focusedValue),\n\t\t\t\t\t\tmaxItems: opts.maxItems,\n\t\t\t\t\t\toutput: opts.output,\n\t\t\t\t\t});\n\n\t\t\t\t\t// Build the prompt display\n\t\t\t\t\treturn [\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t`${color.cyan(S_BAR)}  ${color.dim('Search:')} ${searchText}${matches}`,\n\t\t\t\t\t\t...noResults,\n\t\t\t\t\t\t...errorMessage,\n\t\t\t\t\t\t...displayOptions.map((option) => `${color.cyan(S_BAR)}  ${option}`),\n\t\t\t\t\t\t`${color.cyan(S_BAR)}  ${color.dim(instructions.join(' • '))}`,\n\t\t\t\t\t\t`${color.cyan(S_BAR_END)}`,\n\t\t\t\t\t].join('\\n');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n\n\t// Return the result or cancel symbol\n\treturn prompt.prompt() as Promise<Value | symbol>;\n};\n","import { ConfirmPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_END,\n\tS_RADIO_ACTIVE,\n\tS_RADIO_INACTIVE,\n\tsymbol,\n} from './common.js';\n\nexport interface ConfirmOptions extends CommonOptions {\n\tmessage: string;\n\tactive?: string;\n\tinactive?: string;\n\tinitialValue?: boolean;\n}\nexport const confirm = (opts: ConfirmOptions) => {\n\tconst active = opts.active ?? 'Yes';\n\tconst inactive = opts.inactive ?? 'No';\n\treturn new ConfirmPrompt({\n\t\tactive,\n\t\tinactive,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tinitialValue: opts.initialValue ?? true,\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst value = this.value ? active : inactive;\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.dim(value)}`;\n\t\t\t\tcase 'cancel':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.strikethrough(\n\t\t\t\t\t\tcolor.dim(value)\n\t\t\t\t\t)}\\n${color.gray(S_BAR)}`;\n\t\t\t\tdefault: {\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${\n\t\t\t\t\t\tthis.value\n\t\t\t\t\t\t\t? `${color.green(S_RADIO_ACTIVE)} ${active}`\n\t\t\t\t\t\t\t: `${color.dim(S_RADIO_INACTIVE)} ${color.dim(active)}`\n\t\t\t\t\t} ${color.dim('/')} ${\n\t\t\t\t\t\t!this.value\n\t\t\t\t\t\t\t? `${color.green(S_RADIO_ACTIVE)} ${inactive}`\n\t\t\t\t\t\t\t: `${color.dim(S_RADIO_INACTIVE)} ${color.dim(inactive)}`\n\t\t\t\t\t}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<boolean | symbol>;\n};\n","import { GroupMultiSelectPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_END,\n\tS_CHECKBOX_ACTIVE,\n\tS_CHECKBOX_INACTIVE,\n\tS_CHECKBOX_SELECTED,\n\tsymbol,\n} from './common.js';\nimport type { Option } from './select.js';\n\nexport interface GroupMultiSelectOptions<Value> extends CommonOptions {\n\tmessage: string;\n\toptions: Record<string, Option<Value>[]>;\n\tinitialValues?: Value[];\n\trequired?: boolean;\n\tcursorAt?: Value;\n\tselectableGroups?: boolean;\n\tgroupSpacing?: number;\n}\nexport const groupMultiselect = <Value>(opts: GroupMultiSelectOptions<Value>) => {\n\tconst { selectableGroups = true, groupSpacing = 0 } = opts;\n\tconst opt = (\n\t\toption: Option<Value>,\n\t\tstate:\n\t\t\t| 'inactive'\n\t\t\t| 'active'\n\t\t\t| 'selected'\n\t\t\t| 'active-selected'\n\t\t\t| 'group-active'\n\t\t\t| 'group-active-selected'\n\t\t\t| 'submitted'\n\t\t\t| 'cancelled',\n\t\toptions: Option<Value>[] = []\n\t) => {\n\t\tconst label = option.label ?? String(option.value);\n\t\tconst isItem = typeof (option as any).group === 'string';\n\t\tconst next = isItem && (options[options.indexOf(option) + 1] ?? { group: true });\n\t\tconst isLast = isItem && (next as any).group === true;\n\t\tconst prefix = isItem ? (selectableGroups ? `${isLast ? S_BAR_END : S_BAR} ` : '  ') : '';\n\t\tconst spacingPrefix =\n\t\t\tgroupSpacing > 0 && !isItem ? `\\n${color.cyan(S_BAR)}  `.repeat(groupSpacing) : '';\n\n\t\tif (state === 'active') {\n\t\t\treturn `${spacingPrefix}${color.dim(prefix)}${color.cyan(S_CHECKBOX_ACTIVE)} ${label} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'group-active') {\n\t\t\treturn `${spacingPrefix}${prefix}${color.cyan(S_CHECKBOX_ACTIVE)} ${color.dim(label)}`;\n\t\t}\n\t\tif (state === 'group-active-selected') {\n\t\t\treturn `${spacingPrefix}${prefix}${color.green(S_CHECKBOX_SELECTED)} ${color.dim(label)}`;\n\t\t}\n\t\tif (state === 'selected') {\n\t\t\tconst selectedCheckbox = isItem || selectableGroups ? color.green(S_CHECKBOX_SELECTED) : '';\n\t\t\treturn `${spacingPrefix}${color.dim(prefix)}${selectedCheckbox} ${color.dim(label)} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'cancelled') {\n\t\t\treturn `${color.strikethrough(color.dim(label))}`;\n\t\t}\n\t\tif (state === 'active-selected') {\n\t\t\treturn `${spacingPrefix}${color.dim(prefix)}${color.green(S_CHECKBOX_SELECTED)} ${label} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'submitted') {\n\t\t\treturn `${color.dim(label)}`;\n\t\t}\n\t\tconst unselectedCheckbox = isItem || selectableGroups ? color.dim(S_CHECKBOX_INACTIVE) : '';\n\t\treturn `${spacingPrefix}${color.dim(prefix)}${unselectedCheckbox} ${color.dim(label)}`;\n\t};\n\tconst required = opts.required ?? true;\n\n\treturn new GroupMultiSelectPrompt({\n\t\toptions: opts.options,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tinitialValues: opts.initialValues,\n\t\trequired,\n\t\tcursorAt: opts.cursorAt,\n\t\tselectableGroups,\n\t\tvalidate(selected: Value[] | undefined) {\n\t\t\tif (required && (selected === undefined || selected.length === 0))\n\t\t\t\treturn `Please select at least one option.\\n${color.reset(\n\t\t\t\t\tcolor.dim(\n\t\t\t\t\t\t`Press ${color.gray(color.bgWhite(color.inverse(' space ')))} to select, ${color.gray(\n\t\t\t\t\t\t\tcolor.bgWhite(color.inverse(' enter '))\n\t\t\t\t\t\t)} to submit`\n\t\t\t\t\t)\n\t\t\t\t)}`;\n\t\t},\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst value = this.value ?? [];\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${this.options\n\t\t\t\t\t\t.filter(({ value: optionValue }) => value.includes(optionValue))\n\t\t\t\t\t\t.map((option) => opt(option, 'submitted'))\n\t\t\t\t\t\t.join(color.dim(', '))}`;\n\t\t\t\t}\n\t\t\t\tcase 'cancel': {\n\t\t\t\t\tconst label = this.options\n\t\t\t\t\t\t.filter(({ value: optionValue }) => value.includes(optionValue))\n\t\t\t\t\t\t.map((option) => opt(option, 'cancelled'))\n\t\t\t\t\t\t.join(color.dim(', '));\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${\n\t\t\t\t\t\tlabel.trim() ? `${label}\\n${color.gray(S_BAR)}` : ''\n\t\t\t\t\t}`;\n\t\t\t\t}\n\t\t\t\tcase 'error': {\n\t\t\t\t\tconst footer = this.error\n\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t.map((ln, i) =>\n\t\t\t\t\t\t\ti === 0 ? `${color.yellow(S_BAR_END)}  ${color.yellow(ln)}` : `   ${ln}`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join('\\n');\n\t\t\t\t\treturn `${title}${color.yellow(S_BAR)}  ${this.options\n\t\t\t\t\t\t.map((option, i, options) => {\n\t\t\t\t\t\t\tconst selected =\n\t\t\t\t\t\t\t\tvalue.includes(option.value) ||\n\t\t\t\t\t\t\t\t(option.group === true && this.isGroupSelected(`${option.value}`));\n\t\t\t\t\t\t\tconst active = i === this.cursor;\n\t\t\t\t\t\t\tconst groupActive =\n\t\t\t\t\t\t\t\t!active &&\n\t\t\t\t\t\t\t\ttypeof option.group === 'string' &&\n\t\t\t\t\t\t\t\tthis.options[this.cursor].value === option.group;\n\t\t\t\t\t\t\tif (groupActive) {\n\t\t\t\t\t\t\t\treturn opt(option, selected ? 'group-active-selected' : 'group-active', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (active && selected) {\n\t\t\t\t\t\t\t\treturn opt(option, 'active-selected', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (selected) {\n\t\t\t\t\t\t\t\treturn opt(option, 'selected', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn opt(option, active ? 'active' : 'inactive', options);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(`\\n${color.yellow(S_BAR)}  `)}\\n${footer}\\n`;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${this.options\n\t\t\t\t\t\t.map((option, i, options) => {\n\t\t\t\t\t\t\tconst selected =\n\t\t\t\t\t\t\t\tvalue.includes(option.value) ||\n\t\t\t\t\t\t\t\t(option.group === true && this.isGroupSelected(`${option.value}`));\n\t\t\t\t\t\t\tconst active = i === this.cursor;\n\t\t\t\t\t\t\tconst groupActive =\n\t\t\t\t\t\t\t\t!active &&\n\t\t\t\t\t\t\t\ttypeof option.group === 'string' &&\n\t\t\t\t\t\t\t\tthis.options[this.cursor].value === option.group;\n\t\t\t\t\t\t\tif (groupActive) {\n\t\t\t\t\t\t\t\treturn opt(option, selected ? 'group-active-selected' : 'group-active', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (active && selected) {\n\t\t\t\t\t\t\t\treturn opt(option, 'active-selected', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (selected) {\n\t\t\t\t\t\t\t\treturn opt(option, 'selected', options);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn opt(option, active ? 'active' : 'inactive', options);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(`\\n${color.cyan(S_BAR)}  `)}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<Value[] | symbol>;\n};\n","import { isCancel } from '@clack/core';\n\ntype Prettify<T> = {\n\t[P in keyof T]: T[P];\n} & {};\n\nexport type PromptGroupAwaitedReturn<T> = {\n\t[P in keyof T]: Exclude<Awaited<T[P]>, symbol>;\n};\n\nexport interface PromptGroupOptions<T> {\n\t/**\n\t * Control how the group can be canceled\n\t * if one of the prompts is canceled.\n\t */\n\tonCancel?: (opts: {\n\t\tresults: Prettify<Partial<PromptGroupAwaitedReturn<T>>>;\n\t}) => void;\n}\n\nexport type PromptGroup<T> = {\n\t[P in keyof T]: (opts: {\n\t\tresults: Prettify<Partial<PromptGroupAwaitedReturn<Omit<T, P>>>>;\n\t}) => undefined | Promise<T[P] | undefined>;\n};\n\n/**\n * Define a group of prompts to be displayed\n * and return a results of objects within the group\n */\nexport const group = async <T>(\n\tprompts: PromptGroup<T>,\n\topts?: PromptGroupOptions<T>\n): Promise<Prettify<PromptGroupAwaitedReturn<T>>> => {\n\tconst results = {} as any;\n\tconst promptNames = Object.keys(prompts);\n\n\tfor (const name of promptNames) {\n\t\tconst prompt = prompts[name as keyof T];\n\t\tconst result = await prompt({ results })?.catch((e) => {\n\t\t\tthrow e;\n\t\t});\n\n\t\t// Pass the results to the onCancel function\n\t\t// so the user can decide what to do with the results\n\t\t// TODO: Switch to callback within core to avoid isCancel Fn\n\t\tif (typeof opts?.onCancel === 'function' && isCancel(result)) {\n\t\t\tresults[name] = 'canceled';\n\t\t\topts.onCancel({ results });\n\t\t\tcontinue;\n\t\t}\n\n\t\tresults[name] = result;\n\t}\n\n\treturn results;\n};\n","import color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_ERROR,\n\tS_INFO,\n\tS_STEP_SUBMIT,\n\tS_SUCCESS,\n\tS_WARN,\n} from './common.js';\n\nexport interface LogMessageOptions extends CommonOptions {\n\tsymbol?: string;\n\tspacing?: number;\n\tsecondarySymbol?: string;\n}\n\nexport const log = {\n\tmessage: (\n\t\tmessage: string | string[] = [],\n\t\t{\n\t\t\tsymbol = color.gray(S_BAR),\n\t\t\tsecondarySymbol = color.gray(S_BAR),\n\t\t\toutput = process.stdout,\n\t\t\tspacing = 1,\n\t\t}: LogMessageOptions = {}\n\t) => {\n\t\tconst parts: string[] = [];\n\t\tfor (let i = 0; i < spacing; i++) {\n\t\t\tparts.push(`${secondarySymbol}`);\n\t\t}\n\t\tconst messageParts = Array.isArray(message) ? message : message.split('\\n');\n\t\tif (messageParts.length > 0) {\n\t\t\tconst [firstLine, ...lines] = messageParts;\n\t\t\tif (firstLine.length > 0) {\n\t\t\t\tparts.push(`${symbol}  ${firstLine}`);\n\t\t\t} else {\n\t\t\t\tparts.push(symbol);\n\t\t\t}\n\t\t\tfor (const ln of lines) {\n\t\t\t\tif (ln.length > 0) {\n\t\t\t\t\tparts.push(`${secondarySymbol}  ${ln}`);\n\t\t\t\t} else {\n\t\t\t\t\tparts.push(secondarySymbol);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\toutput.write(`${parts.join('\\n')}\\n`);\n\t},\n\tinfo: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.message(message, { ...opts, symbol: color.blue(S_INFO) });\n\t},\n\tsuccess: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.message(message, { ...opts, symbol: color.green(S_SUCCESS) });\n\t},\n\tstep: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.message(message, { ...opts, symbol: color.green(S_STEP_SUBMIT) });\n\t},\n\twarn: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.message(message, { ...opts, symbol: color.yellow(S_WARN) });\n\t},\n\t/** alias for `log.warn()`. */\n\twarning: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.warn(message, opts);\n\t},\n\terror: (message: string, opts?: LogMessageOptions) => {\n\t\tlog.message(message, { ...opts, symbol: color.red(S_ERROR) });\n\t},\n};\n","import type { Writable } from 'node:stream';\nimport color from 'picocolors';\nimport { type CommonOptions, S_BAR, S_BAR_END, S_BAR_START } from './common.js';\n\nexport const cancel = (message = '', opts?: CommonOptions) => {\n\tconst output: Writable = opts?.output ?? process.stdout;\n\toutput.write(`${color.gray(S_BAR_END)}  ${color.red(message)}\\n\\n`);\n};\n\nexport const intro = (title = '', opts?: CommonOptions) => {\n\tconst output: Writable = opts?.output ?? process.stdout;\n\toutput.write(`${color.gray(S_BAR_START)}  ${title}\\n`);\n};\n\nexport const outro = (message = '', opts?: CommonOptions) => {\n\tconst output: Writable = opts?.output ?? process.stdout;\n\toutput.write(`${color.gray(S_BAR)}\\n${color.gray(S_BAR_END)}  ${message}\\n\\n`);\n};\n","import { MultiSelectPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_END,\n\tS_CHECKBOX_ACTIVE,\n\tS_CHECKBOX_INACTIVE,\n\tS_CHECKBOX_SELECTED,\n\tsymbol,\n} from './common.js';\nimport { limitOptions } from './limit-options.js';\nimport type { Option } from './select.js';\n\nexport interface MultiSelectOptions<Value> extends CommonOptions {\n\tmessage: string;\n\toptions: Option<Value>[];\n\tinitialValues?: Value[];\n\tmaxItems?: number;\n\trequired?: boolean;\n\tcursorAt?: Value;\n}\nexport const multiselect = <Value>(opts: MultiSelectOptions<Value>) => {\n\tconst opt = (\n\t\toption: Option<Value>,\n\t\tstate: 'inactive' | 'active' | 'selected' | 'active-selected' | 'submitted' | 'cancelled'\n\t) => {\n\t\tconst label = option.label ?? String(option.value);\n\t\tif (state === 'active') {\n\t\t\treturn `${color.cyan(S_CHECKBOX_ACTIVE)} ${label} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'selected') {\n\t\t\treturn `${color.green(S_CHECKBOX_SELECTED)} ${color.dim(label)} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'cancelled') {\n\t\t\treturn `${color.strikethrough(color.dim(label))}`;\n\t\t}\n\t\tif (state === 'active-selected') {\n\t\t\treturn `${color.green(S_CHECKBOX_SELECTED)} ${label} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\tif (state === 'submitted') {\n\t\t\treturn `${color.dim(label)}`;\n\t\t}\n\t\treturn `${color.dim(S_CHECKBOX_INACTIVE)} ${color.dim(label)}`;\n\t};\n\tconst required = opts.required ?? true;\n\n\treturn new MultiSelectPrompt({\n\t\toptions: opts.options,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tinitialValues: opts.initialValues,\n\t\trequired,\n\t\tcursorAt: opts.cursorAt,\n\t\tvalidate(selected: Value[] | undefined) {\n\t\t\tif (required && (selected === undefined || selected.length === 0))\n\t\t\t\treturn `Please select at least one option.\\n${color.reset(\n\t\t\t\t\tcolor.dim(\n\t\t\t\t\t\t`Press ${color.gray(color.bgWhite(color.inverse(' space ')))} to select, ${color.gray(\n\t\t\t\t\t\t\tcolor.bgWhite(color.inverse(' enter '))\n\t\t\t\t\t\t)} to submit`\n\t\t\t\t\t)\n\t\t\t\t)}`;\n\t\t},\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst value = this.value ?? [];\n\n\t\t\tconst styleOption = (option: Option<Value>, active: boolean) => {\n\t\t\t\tconst selected = value.includes(option.value);\n\t\t\t\tif (active && selected) {\n\t\t\t\t\treturn opt(option, 'active-selected');\n\t\t\t\t}\n\t\t\t\tif (selected) {\n\t\t\t\t\treturn opt(option, 'selected');\n\t\t\t\t}\n\t\t\t\treturn opt(option, active ? 'active' : 'inactive');\n\t\t\t};\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${\n\t\t\t\t\t\tthis.options\n\t\t\t\t\t\t\t.filter(({ value: optionValue }) => value.includes(optionValue))\n\t\t\t\t\t\t\t.map((option) => opt(option, 'submitted'))\n\t\t\t\t\t\t\t.join(color.dim(', ')) || color.dim('none')\n\t\t\t\t\t}`;\n\t\t\t\t}\n\t\t\t\tcase 'cancel': {\n\t\t\t\t\tconst label = this.options\n\t\t\t\t\t\t.filter(({ value: optionValue }) => value.includes(optionValue))\n\t\t\t\t\t\t.map((option) => opt(option, 'cancelled'))\n\t\t\t\t\t\t.join(color.dim(', '));\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${\n\t\t\t\t\t\tlabel.trim() ? `${label}\\n${color.gray(S_BAR)}` : ''\n\t\t\t\t\t}`;\n\t\t\t\t}\n\t\t\t\tcase 'error': {\n\t\t\t\t\tconst footer = this.error\n\t\t\t\t\t\t.split('\\n')\n\t\t\t\t\t\t.map((ln, i) =>\n\t\t\t\t\t\t\ti === 0 ? `${color.yellow(S_BAR_END)}  ${color.yellow(ln)}` : `   ${ln}`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.join('\\n');\n\t\t\t\t\treturn `${title + color.yellow(S_BAR)}  ${limitOptions({\n\t\t\t\t\t\toutput: opts.output,\n\t\t\t\t\t\toptions: this.options,\n\t\t\t\t\t\tcursor: this.cursor,\n\t\t\t\t\t\tmaxItems: opts.maxItems,\n\t\t\t\t\t\tstyle: styleOption,\n\t\t\t\t\t}).join(`\\n${color.yellow(S_BAR)}  `)}\\n${footer}\\n`;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${limitOptions({\n\t\t\t\t\t\toutput: opts.output,\n\t\t\t\t\t\toptions: this.options,\n\t\t\t\t\t\tcursor: this.cursor,\n\t\t\t\t\t\tmaxItems: opts.maxItems,\n\t\t\t\t\t\tstyle: styleOption,\n\t\t\t\t\t}).join(`\\n${color.cyan(S_BAR)}  `)}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<Value[] | symbol>;\n};\n","import type { Writable } from 'node:stream';\nimport { stripVTControlCharacters as strip } from 'node:util';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_H,\n\tS_CONNECT_LEFT,\n\tS_CORNER_BOTTOM_RIGHT,\n\tS_CORNER_TOP_RIGHT,\n\tS_STEP_SUBMIT,\n} from './common.js';\n\nexport interface NoteOptions extends CommonOptions {\n\tformat?: (line: string) => string;\n}\n\nconst defaultNoteFormatter = (line: string): string => color.dim(line);\n\nexport const note = (message = '', title = '', opts?: NoteOptions) => {\n\tconst format = opts?.format ?? defaultNoteFormatter;\n\tconst lines = ['', ...message.split('\\n').map(format), ''];\n\tconst titleLen = strip(title).length;\n\tconst output: Writable = opts?.output ?? process.stdout;\n\tconst len =\n\t\tMath.max(\n\t\t\tlines.reduce((sum, ln) => {\n\t\t\t\tconst line = strip(ln);\n\t\t\t\treturn line.length > sum ? line.length : sum;\n\t\t\t}, 0),\n\t\t\ttitleLen\n\t\t) + 2;\n\tconst msg = lines\n\t\t.map(\n\t\t\t(ln) => `${color.gray(S_BAR)}  ${ln}${' '.repeat(len - strip(ln).length)}${color.gray(S_BAR)}`\n\t\t)\n\t\t.join('\\n');\n\toutput.write(\n\t\t`${color.gray(S_BAR)}\\n${color.green(S_STEP_SUBMIT)}  ${color.reset(title)} ${color.gray(\n\t\t\tS_BAR_H.repeat(Math.max(len - titleLen - 1, 1)) + S_CORNER_TOP_RIGHT\n\t\t)}\\n${msg}\\n${color.gray(S_CONNECT_LEFT + S_BAR_H.repeat(len + 2) + S_CORNER_BOTTOM_RIGHT)}\\n`\n\t);\n};\n","import { PasswordPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport { type CommonOptions, S_BAR, S_BAR_END, S_PASSWORD_MASK, symbol } from './common.js';\n\nexport interface PasswordOptions extends CommonOptions {\n\tmessage: string;\n\tmask?: string;\n\tvalidate?: (value: string | undefined) => string | Error | undefined;\n}\nexport const password = (opts: PasswordOptions) => {\n\treturn new PasswordPrompt({\n\t\tvalidate: opts.validate,\n\t\tmask: opts.mask ?? S_PASSWORD_MASK,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst userInput = this.userInputWithCursor;\n\t\t\tconst masked = this.masked;\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'error':\n\t\t\t\t\treturn `${title.trim()}\\n${color.yellow(S_BAR)}  ${masked}\\n${color.yellow(\n\t\t\t\t\t\tS_BAR_END\n\t\t\t\t\t)}  ${color.yellow(this.error)}\\n`;\n\t\t\t\tcase 'submit':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.dim(masked)}`;\n\t\t\t\tcase 'cancel':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.strikethrough(color.dim(masked))}${\n\t\t\t\t\t\tmasked ? `\\n${color.gray(S_BAR)}` : ''\n\t\t\t\t\t}`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${userInput}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<string | symbol>;\n};\n","import { existsSync, lstatSync, readdirSync } from 'node:fs';\nimport { dirname, join } from 'node:path';\nimport { autocomplete } from './autocomplete.js';\nimport type { CommonOptions } from './common.js';\n\nexport interface PathOptions extends CommonOptions {\n\troot?: string;\n\tdirectory?: boolean;\n\tinitialValue?: string;\n\tmessage: string;\n\tvalidate?: (value: string | undefined) => string | Error | undefined;\n}\n\nexport const path = (opts: PathOptions) => {\n\tconst validate = opts.validate;\n\n\treturn autocomplete({\n\t\t...opts,\n\t\tinitialUserInput: opts.initialValue ?? opts.root ?? process.cwd(),\n\t\tmaxItems: 5,\n\t\tvalidate(value) {\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\t// Shouldn't ever happen since we don't enable `multiple: true`\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tif (!value) {\n\t\t\t\treturn 'Please select a path';\n\t\t\t}\n\t\t\tif (validate) {\n\t\t\t\treturn validate(value);\n\t\t\t}\n\t\t\treturn undefined;\n\t\t},\n\t\toptions() {\n\t\t\tconst userInput = this.userInput;\n\t\t\tif (userInput === '') {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tlet searchPath: string;\n\n\t\t\t\tif (!existsSync(userInput)) {\n\t\t\t\t\tsearchPath = dirname(userInput);\n\t\t\t\t} else {\n\t\t\t\t\tconst stat = lstatSync(userInput);\n\t\t\t\t\tif (stat.isDirectory()) {\n\t\t\t\t\t\tsearchPath = userInput;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchPath = dirname(userInput);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst items = readdirSync(searchPath)\n\t\t\t\t\t.map((item) => {\n\t\t\t\t\t\tconst path = join(searchPath, item);\n\t\t\t\t\t\tconst stats = lstatSync(path);\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: item,\n\t\t\t\t\t\t\tpath,\n\t\t\t\t\t\t\tisDirectory: stats.isDirectory(),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter(\n\t\t\t\t\t\t({ path, isDirectory }) =>\n\t\t\t\t\t\t\tpath.startsWith(userInput) && (opts.directory || !isDirectory)\n\t\t\t\t\t);\n\t\t\t\treturn items.map((item) => ({\n\t\t\t\t\tvalue: item.path,\n\t\t\t\t}));\n\t\t\t} catch (e) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t});\n};\n","import { block, settings } from '@clack/core';\nimport color from 'picocolors';\nimport { cursor, erase } from 'sisteransi';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_STEP_CANCEL,\n\tS_STEP_ERROR,\n\tS_STEP_SUBMIT,\n\tisCI as isCIFn,\n\tunicode,\n} from './common.js';\n\nexport interface SpinnerOptions extends CommonOptions {\n\tindicator?: 'dots' | 'timer';\n\tonCancel?: () => void;\n\tcancelMessage?: string;\n\terrorMessage?: string;\n\tframes?: string[];\n\tdelay?: number;\n}\n\nexport interface SpinnerResult {\n\tstart(msg?: string): void;\n\tstop(msg?: string, code?: number): void;\n\tmessage(msg?: string): void;\n\treadonly isCancelled: boolean;\n}\n\nexport const spinner = ({\n\tindicator = 'dots',\n\tonCancel,\n\toutput = process.stdout,\n\tcancelMessage,\n\terrorMessage,\n\tframes = unicode ? ['◒', '◐', '◓', '◑'] : ['•', 'o', 'O', '0'],\n\tdelay = unicode ? 80 : 120,\n\tsignal,\n}: SpinnerOptions = {}): SpinnerResult => {\n\tconst isCI = isCIFn();\n\n\tlet unblock: () => void;\n\tlet loop: NodeJS.Timeout;\n\tlet isSpinnerActive = false;\n\tlet isCancelled = false;\n\tlet _message = '';\n\tlet _prevMessage: string | undefined = undefined;\n\tlet _origin: number = performance.now();\n\n\tconst handleExit = (code: number) => {\n\t\tconst msg =\n\t\t\tcode > 1\n\t\t\t\t? (errorMessage ?? settings.messages.error)\n\t\t\t\t: (cancelMessage ?? settings.messages.cancel);\n\t\tisCancelled = code === 1;\n\t\tif (isSpinnerActive) {\n\t\t\tstop(msg, code);\n\t\t\tif (isCancelled && typeof onCancel === 'function') {\n\t\t\t\tonCancel();\n\t\t\t}\n\t\t}\n\t};\n\n\tconst errorEventHandler = () => handleExit(2);\n\tconst signalEventHandler = () => handleExit(1);\n\n\tconst registerHooks = () => {\n\t\t// Reference: https://nodejs.org/api/process.html#event-uncaughtexception\n\t\tprocess.on('uncaughtExceptionMonitor', errorEventHandler);\n\t\t// Reference: https://nodejs.org/api/process.html#event-unhandledrejection\n\t\tprocess.on('unhandledRejection', errorEventHandler);\n\t\t// Reference Signal Events: https://nodejs.org/api/process.html#signal-events\n\t\tprocess.on('SIGINT', signalEventHandler);\n\t\tprocess.on('SIGTERM', signalEventHandler);\n\t\tprocess.on('exit', handleExit);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', signalEventHandler);\n\t\t}\n\t};\n\n\tconst clearHooks = () => {\n\t\tprocess.removeListener('uncaughtExceptionMonitor', errorEventHandler);\n\t\tprocess.removeListener('unhandledRejection', errorEventHandler);\n\t\tprocess.removeListener('SIGINT', signalEventHandler);\n\t\tprocess.removeListener('SIGTERM', signalEventHandler);\n\t\tprocess.removeListener('exit', handleExit);\n\n\t\tif (signal) {\n\t\t\tsignal.removeEventListener('abort', signalEventHandler);\n\t\t}\n\t};\n\n\tconst clearPrevMessage = () => {\n\t\tif (_prevMessage === undefined) return;\n\t\tif (isCI) output.write('\\n');\n\t\tconst prevLines = _prevMessage.split('\\n');\n\t\toutput.write(cursor.move(-999, prevLines.length - 1));\n\t\toutput.write(erase.down(prevLines.length));\n\t};\n\n\tconst removeTrailingDots = (msg: string): string => {\n\t\treturn msg.replace(/\\.+$/, '');\n\t};\n\n\tconst formatTimer = (origin: number): string => {\n\t\tconst duration = (performance.now() - origin) / 1000;\n\t\tconst min = Math.floor(duration / 60);\n\t\tconst secs = Math.floor(duration % 60);\n\t\treturn min > 0 ? `[${min}m ${secs}s]` : `[${secs}s]`;\n\t};\n\n\tconst start = (msg = ''): void => {\n\t\tisSpinnerActive = true;\n\t\tunblock = block({ output });\n\t\t_message = removeTrailingDots(msg);\n\t\t_origin = performance.now();\n\t\toutput.write(`${color.gray(S_BAR)}\\n`);\n\t\tlet frameIndex = 0;\n\t\tlet indicatorTimer = 0;\n\t\tregisterHooks();\n\t\tloop = setInterval(() => {\n\t\t\tif (isCI && _message === _prevMessage) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tclearPrevMessage();\n\t\t\t_prevMessage = _message;\n\t\t\tconst frame = color.magenta(frames[frameIndex]);\n\n\t\t\tif (isCI) {\n\t\t\t\toutput.write(`${frame}  ${_message}...`);\n\t\t\t} else if (indicator === 'timer') {\n\t\t\t\toutput.write(`${frame}  ${_message} ${formatTimer(_origin)}`);\n\t\t\t} else {\n\t\t\t\tconst loadingDots = '.'.repeat(Math.floor(indicatorTimer)).slice(0, 3);\n\t\t\t\toutput.write(`${frame}  ${_message}${loadingDots}`);\n\t\t\t}\n\n\t\t\tframeIndex = frameIndex + 1 < frames.length ? frameIndex + 1 : 0;\n\t\t\t// indicator increase by 1 every 8 frames\n\t\t\tindicatorTimer = indicatorTimer < 4 ? indicatorTimer + 0.125 : 0;\n\t\t}, delay);\n\t};\n\n\tconst stop = (msg = '', code = 0): void => {\n\t\tisSpinnerActive = false;\n\t\tclearInterval(loop);\n\t\tclearPrevMessage();\n\t\tconst step =\n\t\t\tcode === 0\n\t\t\t\t? color.green(S_STEP_SUBMIT)\n\t\t\t\t: code === 1\n\t\t\t\t\t? color.red(S_STEP_CANCEL)\n\t\t\t\t\t: color.red(S_STEP_ERROR);\n\t\t_message = msg ?? _message;\n\t\tif (indicator === 'timer') {\n\t\t\toutput.write(`${step}  ${_message} ${formatTimer(_origin)}\\n`);\n\t\t} else {\n\t\t\toutput.write(`${step}  ${_message}\\n`);\n\t\t}\n\t\tclearHooks();\n\t\tunblock();\n\t};\n\n\tconst message = (msg = ''): void => {\n\t\t_message = removeTrailingDots(msg ?? _message);\n\t};\n\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\tmessage,\n\t\tget isCancelled() {\n\t\t\treturn isCancelled;\n\t\t},\n\t};\n};\n","import type { State } from '@clack/core';\nimport color from 'picocolors';\nimport { unicodeOr } from './common.js';\nimport { type SpinnerOptions, type SpinnerResult, spinner } from './spinner.js';\n\nconst S_PROGRESS_CHAR: Record<NonNullable<ProgressOptions['style']>, string> = {\n\tlight: unicodeOr('─', '-'),\n\theavy: unicodeOr('━', '='),\n\tblock: unicodeOr('█', '#'),\n};\n\nexport interface ProgressOptions extends SpinnerOptions {\n\tstyle?: 'light' | 'heavy' | 'block';\n\tmax?: number;\n\tsize?: number;\n}\n\nexport interface ProgressResult extends SpinnerResult {\n\tadvance(step?: number, msg?: string): void;\n}\n\nexport function progress({\n\tstyle = 'heavy',\n\tmax: userMax = 100,\n\tsize: userSize = 40,\n\t...spinnerOptions\n}: ProgressOptions = {}): ProgressResult {\n\tconst spin = spinner(spinnerOptions);\n\tlet value = 0;\n\tlet previousMessage = '';\n\n\tconst max = Math.max(1, userMax);\n\tconst size = Math.max(1, userSize);\n\n\tconst activeStyle = (state: State) => {\n\t\tswitch (state) {\n\t\t\tcase 'initial':\n\t\t\tcase 'active':\n\t\t\t\treturn color.magenta;\n\t\t\tcase 'error':\n\t\t\tcase 'cancel':\n\t\t\t\treturn color.red;\n\t\t\tcase 'submit':\n\t\t\t\treturn color.green;\n\t\t\tdefault:\n\t\t\t\treturn color.magenta;\n\t\t}\n\t};\n\tconst drawProgress = (state: State, msg: string) => {\n\t\tconst active = Math.floor((value / max) * size);\n\t\treturn `${activeStyle(state)(S_PROGRESS_CHAR[style].repeat(active))}${color.dim(S_PROGRESS_CHAR[style].repeat(size - active))} ${msg}`;\n\t};\n\n\tconst start = (msg = '') => {\n\t\tpreviousMessage = msg;\n\t\treturn spin.start(drawProgress('initial', msg));\n\t};\n\tconst advance = (step = 1, msg?: string): void => {\n\t\tvalue = Math.min(max, step + value);\n\t\tspin.message(drawProgress('active', msg ?? previousMessage));\n\t\tpreviousMessage = msg ?? previousMessage;\n\t};\n\treturn {\n\t\tstart,\n\t\tstop: spin.stop,\n\t\tadvance,\n\t\tisCancelled: spin.isCancelled,\n\t\tmessage: (msg: string) => advance(0, msg),\n\t};\n}\n","import { SelectKeyPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport { S_BAR, S_BAR_END, symbol } from './common.js';\nimport type { Option, SelectOptions } from './select.js';\n\nexport const selectKey = <Value extends string>(opts: SelectOptions<Value>) => {\n\tconst opt = (\n\t\toption: Option<Value>,\n\t\tstate: 'inactive' | 'active' | 'selected' | 'cancelled' = 'inactive'\n\t) => {\n\t\tconst label = option.label ?? String(option.value);\n\t\tif (state === 'selected') {\n\t\t\treturn `${color.dim(label)}`;\n\t\t}\n\t\tif (state === 'cancelled') {\n\t\t\treturn `${color.strikethrough(color.dim(label))}`;\n\t\t}\n\t\tif (state === 'active') {\n\t\t\treturn `${color.bgCyan(color.gray(` ${option.value} `))} ${label} ${\n\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t}`;\n\t\t}\n\t\treturn `${color.gray(color.bgWhite(color.inverse(` ${option.value} `)))} ${label} ${\n\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t}`;\n\t};\n\n\treturn new SelectKeyPrompt({\n\t\toptions: opts.options,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tinitialValue: opts.initialValue,\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${opt(\n\t\t\t\t\t\tthis.options.find((opt) => opt.value === this.value) ?? opts.options[0],\n\t\t\t\t\t\t'selected'\n\t\t\t\t\t)}`;\n\t\t\t\tcase 'cancel':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${opt(this.options[0], 'cancelled')}\\n${color.gray(\n\t\t\t\t\t\tS_BAR\n\t\t\t\t\t)}`;\n\t\t\t\tdefault: {\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${this.options\n\t\t\t\t\t\t.map((option, i) => opt(option, i === this.cursor ? 'active' : 'inactive'))\n\t\t\t\t\t\t.join(`\\n${color.cyan(S_BAR)}  `)}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<Value | symbol>;\n};\n","import { SelectPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport {\n\ttype CommonOptions,\n\tS_BAR,\n\tS_BAR_END,\n\tS_RADIO_ACTIVE,\n\tS_RADIO_INACTIVE,\n\tsymbol,\n} from './common.js';\nimport { limitOptions } from './limit-options.js';\n\ntype Primitive = Readonly<string | boolean | number>;\n\nexport type Option<Value> = Value extends Primitive\n\t? {\n\t\t\t/**\n\t\t\t * Internal data for this option.\n\t\t\t */\n\t\t\tvalue: Value;\n\t\t\t/**\n\t\t\t * The optional, user-facing text for this option.\n\t\t\t *\n\t\t\t * By default, the `value` is converted to a string.\n\t\t\t */\n\t\t\tlabel?: string;\n\t\t\t/**\n\t\t\t * An optional hint to display to the user when\n\t\t\t * this option might be selected.\n\t\t\t *\n\t\t\t * By default, no `hint` is displayed.\n\t\t\t */\n\t\t\thint?: string;\n\t\t}\n\t: {\n\t\t\t/**\n\t\t\t * Internal data for this option.\n\t\t\t */\n\t\t\tvalue: Value;\n\t\t\t/**\n\t\t\t * Required. The user-facing text for this option.\n\t\t\t */\n\t\t\tlabel: string;\n\t\t\t/**\n\t\t\t * An optional hint to display to the user when\n\t\t\t * this option might be selected.\n\t\t\t *\n\t\t\t * By default, no `hint` is displayed.\n\t\t\t */\n\t\t\thint?: string;\n\t\t};\n\nexport interface SelectOptions<Value> extends CommonOptions {\n\tmessage: string;\n\toptions: Option<Value>[];\n\tinitialValue?: Value;\n\tmaxItems?: number;\n}\n\nexport const select = <Value>(opts: SelectOptions<Value>) => {\n\tconst opt = (option: Option<Value>, state: 'inactive' | 'active' | 'selected' | 'cancelled') => {\n\t\tconst label = option.label ?? String(option.value);\n\t\tswitch (state) {\n\t\t\tcase 'selected':\n\t\t\t\treturn `${color.dim(label)}`;\n\t\t\tcase 'active':\n\t\t\t\treturn `${color.green(S_RADIO_ACTIVE)} ${label} ${\n\t\t\t\t\toption.hint ? color.dim(`(${option.hint})`) : ''\n\t\t\t\t}`;\n\t\t\tcase 'cancelled':\n\t\t\t\treturn `${color.strikethrough(color.dim(label))}`;\n\t\t\tdefault:\n\t\t\t\treturn `${color.dim(S_RADIO_INACTIVE)} ${color.dim(label)}`;\n\t\t}\n\t};\n\n\treturn new SelectPrompt({\n\t\toptions: opts.options,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\toutput: opts.output,\n\t\tinitialValue: opts.initialValue,\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'submit':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${opt(this.options[this.cursor], 'selected')}`;\n\t\t\t\tcase 'cancel':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${opt(\n\t\t\t\t\t\tthis.options[this.cursor],\n\t\t\t\t\t\t'cancelled'\n\t\t\t\t\t)}\\n${color.gray(S_BAR)}`;\n\t\t\t\tdefault: {\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${limitOptions({\n\t\t\t\t\t\toutput: opts.output,\n\t\t\t\t\t\tcursor: this.cursor,\n\t\t\t\t\t\toptions: this.options,\n\t\t\t\t\t\tmaxItems: opts.maxItems,\n\t\t\t\t\t\tstyle: (item, active) => opt(item, active ? 'active' : 'inactive'),\n\t\t\t\t\t}).join(`\\n${color.cyan(S_BAR)}  `)}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<Value | symbol>;\n};\n","import { stripVTControlCharacters as strip } from 'node:util';\nimport color from 'picocolors';\nimport { S_BAR, S_ERROR, S_INFO, S_STEP_SUBMIT, S_SUCCESS, S_WARN } from './common.js';\nimport type { LogMessageOptions } from './log.js';\n\nconst prefix = `${color.gray(S_BAR)}  `;\n\n// TODO (43081j): this currently doesn't support custom `output` writables\n// because we rely on `columns` existing (i.e. `process.stdout.columns).\n//\n// If we want to support `output` being passed in, we will need to use\n// a condition like `if (output insance Writable)` to check if it has columns\nexport const stream = {\n\tmessage: async (\n\t\titerable: Iterable<string> | AsyncIterable<string>,\n\t\t{ symbol = color.gray(S_BAR) }: LogMessageOptions = {}\n\t) => {\n\t\tprocess.stdout.write(`${color.gray(S_BAR)}\\n${symbol}  `);\n\t\tlet lineWidth = 3;\n\t\tfor await (let chunk of iterable) {\n\t\t\tchunk = chunk.replace(/\\n/g, `\\n${prefix}`);\n\t\t\tif (chunk.includes('\\n')) {\n\t\t\t\tlineWidth = 3 + strip(chunk.slice(chunk.lastIndexOf('\\n'))).length;\n\t\t\t}\n\t\t\tconst chunkLen = strip(chunk).length;\n\t\t\tif (lineWidth + chunkLen < process.stdout.columns) {\n\t\t\t\tlineWidth += chunkLen;\n\t\t\t\tprocess.stdout.write(chunk);\n\t\t\t} else {\n\t\t\t\tprocess.stdout.write(`\\n${prefix}${chunk.trimStart()}`);\n\t\t\t\tlineWidth = 3 + strip(chunk.trimStart()).length;\n\t\t\t}\n\t\t}\n\t\tprocess.stdout.write('\\n');\n\t},\n\tinfo: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.message(iterable, { symbol: color.blue(S_INFO) });\n\t},\n\tsuccess: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.message(iterable, { symbol: color.green(S_SUCCESS) });\n\t},\n\tstep: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.message(iterable, { symbol: color.green(S_STEP_SUBMIT) });\n\t},\n\twarn: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.message(iterable, { symbol: color.yellow(S_WARN) });\n\t},\n\t/** alias for `log.warn()`. */\n\twarning: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.warn(iterable);\n\t},\n\terror: (iterable: Iterable<string> | AsyncIterable<string>) => {\n\t\treturn stream.message(iterable, { symbol: color.red(S_ERROR) });\n\t},\n};\n","import type { CommonOptions } from './common.js';\nimport { spinner } from './spinner.js';\n\nexport type Task = {\n\t/**\n\t * Task title\n\t */\n\ttitle: string;\n\t/**\n\t * Task function\n\t */\n\ttask: (message: (string: string) => void) => string | Promise<string> | void | Promise<void>;\n\n\t/**\n\t * If enabled === false the task will be skipped\n\t */\n\tenabled?: boolean;\n};\n\n/**\n * Define a group of tasks to be executed\n */\nexport const tasks = async (tasks: Task[], opts?: CommonOptions) => {\n\tfor (const task of tasks) {\n\t\tif (task.enabled === false) continue;\n\n\t\tconst s = spinner(opts);\n\t\ts.start(task.title);\n\t\tconst result = await task.task(s.message);\n\t\ts.stop(result || task.title);\n\t}\n};\n","import type { Writable } from 'node:stream';\nimport { getColumns } from '@clack/core';\nimport * as color from 'picocolors';\nimport { erase } from 'sisteransi';\nimport { type CommonOptions, S_BAR, S_STEP_SUBMIT, isCI as isCIFn } from './common.js';\nimport { log } from './log.js';\n\nexport interface TaskLogOptions extends CommonOptions {\n\ttitle: string;\n\tlimit?: number;\n\tspacing?: number;\n\tretainLog?: boolean;\n}\n\nexport interface TaskLogMessageOptions {\n\traw?: boolean;\n}\n\nexport interface TaskLogCompletionOptions {\n\tshowLog?: boolean;\n}\n\n/**\n * Renders a log which clears on success and remains on failure\n */\nexport const taskLog = (opts: TaskLogOptions) => {\n\tconst output: Writable = opts.output ?? process.stdout;\n\tconst columns = getColumns(output);\n\tconst secondarySymbol = color.gray(S_BAR);\n\tconst spacing = opts.spacing ?? 1;\n\tconst barSize = 3;\n\tconst retainLog = opts.retainLog === true;\n\tconst isCI = isCIFn();\n\n\toutput.write(`${secondarySymbol}\\n`);\n\toutput.write(`${color.green(S_STEP_SUBMIT)}  ${opts.title}\\n`);\n\tfor (let i = 0; i < spacing; i++) {\n\t\toutput.write(`${secondarySymbol}\\n`);\n\t}\n\n\tlet buffer = '';\n\tlet fullBuffer = '';\n\tlet lastMessageWasRaw = false;\n\n\tconst clear = (clearTitle: boolean): void => {\n\t\tif (buffer.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tconst bufferHeight = buffer.split('\\n').reduce((count, line) => {\n\t\t\tif (line === '') {\n\t\t\t\treturn count + 1;\n\t\t\t}\n\t\t\treturn count + Math.ceil((line.length + barSize) / columns);\n\t\t}, 0);\n\t\tconst lines = bufferHeight + 1 + (clearTitle ? spacing + 2 : 0);\n\t\toutput.write(erase.lines(lines));\n\t};\n\tconst printBuffer = (buf: string, messageSpacing?: number): void => {\n\t\tlog.message(buf.split('\\n').map(color.dim), {\n\t\t\toutput,\n\t\t\tsecondarySymbol,\n\t\t\tsymbol: secondarySymbol,\n\t\t\tspacing: messageSpacing ?? spacing,\n\t\t});\n\t};\n\tconst renderBuffer = (): void => {\n\t\tif (retainLog === true && fullBuffer.length > 0) {\n\t\t\tprintBuffer(`${fullBuffer}\\n${buffer}`);\n\t\t} else {\n\t\t\tprintBuffer(buffer);\n\t\t}\n\t};\n\n\treturn {\n\t\tmessage(msg: string, mopts?: TaskLogMessageOptions) {\n\t\t\tclear(false);\n\t\t\tif ((mopts?.raw !== true || !lastMessageWasRaw) && buffer !== '') {\n\t\t\t\tbuffer += '\\n';\n\t\t\t}\n\t\t\tbuffer += msg;\n\t\t\tlastMessageWasRaw = mopts?.raw === true;\n\t\t\tif (opts.limit !== undefined) {\n\t\t\t\tconst lines = buffer.split('\\n');\n\t\t\t\tconst linesToRemove = lines.length - opts.limit;\n\t\t\t\tif (linesToRemove > 0) {\n\t\t\t\t\tconst removedLines = lines.splice(0, linesToRemove);\n\t\t\t\t\tif (retainLog) {\n\t\t\t\t\t\tfullBuffer += (fullBuffer === '' ? '' : '\\n') + removedLines.join('\\n');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbuffer = lines.join('\\n');\n\t\t\t}\n\t\t\tif (!isCI) {\n\t\t\t\tprintBuffer(buffer, 0);\n\t\t\t}\n\t\t},\n\t\terror(message: string, opts?: TaskLogCompletionOptions): void {\n\t\t\tclear(true);\n\t\t\tlog.error(message, { output, secondarySymbol, spacing: 1 });\n\t\t\tif (opts?.showLog !== false) {\n\t\t\t\trenderBuffer();\n\t\t\t}\n\t\t\t// clear buffer since error is an end state\n\t\t\tbuffer = fullBuffer = '';\n\t\t},\n\t\tsuccess(message: string, opts?: TaskLogCompletionOptions): void {\n\t\t\tclear(true);\n\t\t\tlog.success(message, { output, secondarySymbol, spacing: 1 });\n\t\t\tif (opts?.showLog === true) {\n\t\t\t\trenderBuffer();\n\t\t\t}\n\t\t\t// clear buffer since success is an end state\n\t\t\tbuffer = fullBuffer = '';\n\t\t},\n\t};\n};\n","import { TextPrompt } from '@clack/core';\nimport color from 'picocolors';\nimport { type CommonOptions, S_BAR, S_BAR_END, symbol } from './common.js';\n\nexport interface TextOptions extends CommonOptions {\n\tmessage: string;\n\tplaceholder?: string;\n\tdefaultValue?: string;\n\tinitialValue?: string;\n\tvalidate?: (value: string | undefined) => string | Error | undefined;\n}\n\nexport const text = (opts: TextOptions) => {\n\treturn new TextPrompt({\n\t\tvalidate: opts.validate,\n\t\tplaceholder: opts.placeholder,\n\t\tdefaultValue: opts.defaultValue,\n\t\tinitialValue: opts.initialValue,\n\t\toutput: opts.output,\n\t\tsignal: opts.signal,\n\t\tinput: opts.input,\n\t\trender() {\n\t\t\tconst title = `${color.gray(S_BAR)}\\n${symbol(this.state)}  ${opts.message}\\n`;\n\t\t\tconst placeholder = opts.placeholder\n\t\t\t\t? color.inverse(opts.placeholder[0]) + color.dim(opts.placeholder.slice(1))\n\t\t\t\t: color.inverse(color.hidden('_'));\n\t\t\tconst userInput = !this.userInput ? placeholder : this.userInputWithCursor;\n\t\t\tconst value = this.value ?? '';\n\n\t\t\tswitch (this.state) {\n\t\t\t\tcase 'error':\n\t\t\t\t\treturn `${title.trim()}\\n${color.yellow(S_BAR)}  ${userInput}\\n${color.yellow(\n\t\t\t\t\t\tS_BAR_END\n\t\t\t\t\t)}  ${color.yellow(this.error)}\\n`;\n\t\t\t\tcase 'submit': {\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.dim(value)}`;\n\t\t\t\t}\n\t\t\t\tcase 'cancel':\n\t\t\t\t\treturn `${title}${color.gray(S_BAR)}  ${color.strikethrough(\n\t\t\t\t\t\tcolor.dim(value)\n\t\t\t\t\t)}${value.trim() ? `\\n${color.gray(S_BAR)}` : ''}`;\n\t\t\t\tdefault:\n\t\t\t\t\treturn `${title}${color.cyan(S_BAR)}  ${userInput}\\n${color.cyan(S_BAR_END)}\\n`;\n\t\t\t}\n\t\t},\n\t}).prompt() as Promise<string | symbol>;\n};\n"],"names":["isUnicodeSupported","process","unicode","isCI","unicodeOr","c","fallback","S_STEP_ACTIVE","S_STEP_CANCEL","S_STEP_ERROR","S_STEP_SUBMIT","S_BAR_START","S_BAR","S_BAR_END","S_RADIO_ACTIVE","S_RADIO_INACTIVE","S_CHECKBOX_ACTIVE","S_CHECKBOX_SELECTED","S_CHECKBOX_INACTIVE","S_PASSWORD_MASK","S_BAR_H","S_CORNER_TOP_RIGHT","S_CONNECT_LEFT","S_CORNER_BOTTOM_RIGHT","S_INFO","S_SUCCESS","S_WARN","S_ERROR","symbol","state","color","limitOptions","params","cursor","options","style","output","rows","WriteStream","overflowFormat","paramMaxItems","outputMaxItems","maxItems","slidingWindowLocation","shouldRenderTopEllipsis","shouldRenderBottomEllipsis","option","i","arr","isTopLimit","isBottomLimit","getLabel","getFilteredOption","searchText","label","hint","value","term","getSelectedOptions","values","results","autocomplete","opts","AutocompletePrompt","search","opt","title","userInput","valueAsString","placeholder","showPlaceholder","selected","matches","displayOptions","active","instructions","noResults","validationError","autocompleteMultiselect","formatOption","selectedValues","focusedValue","isSelected","checkbox","prompt","errorMessage","confirm","inactive","ConfirmPrompt","groupMultiselect","selectableGroups","groupSpacing","isItem","next","isLast","prefix","spacingPrefix","selectedCheckbox","unselectedCheckbox","required","GroupMultiSelectPrompt","optionValue","footer","ln","group","prompts","promptNames","name","result","e","isCancel","log","message","secondarySymbol","spacing","parts","messageParts","firstLine","lines","cancel","intro","outro","multiselect","MultiSelectPrompt","styleOption","defaultNoteFormatter","line","note","format","titleLen","strip","len","sum","msg","password","PasswordPrompt","masked","path","validate","searchPath","existsSync","lstatSync","dirname","readdirSync","item","join","stats","isDirectory","spinner","indicator","onCancel","cancelMessage","frames","delay","signal","isCIFn","unblock","loop","isSpinnerActive","isCancelled","_message","_prevMessage","_origin","handleExit","code","settings","stop","errorEventHandler","signalEventHandler","registerHooks","clearHooks","clearPrevMessage","prevLines","erase","removeTrailingDots","formatTimer","origin","duration","min","secs","start","block","frameIndex","indicatorTimer","frame","loadingDots","step","S_PROGRESS_CHAR","progress","userMax","userSize","spinnerOptions","spin","previousMessage","max","size","activeStyle","drawProgress","advance","selectKey","SelectKeyPrompt","select","SelectPrompt","stream","iterable","lineWidth","chunk","chunkLen","tasks","task","taskLog","columns","getColumns","barSize","retainLog","buffer","fullBuffer","lastMessageWasRaw","clear","clearTitle","count","printBuffer","buf","messageSpacing","renderBuffer","mopts","linesToRemove","removedLines","text","TextPrompt"],"mappings":"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","x_google_ignoreList":[0]}