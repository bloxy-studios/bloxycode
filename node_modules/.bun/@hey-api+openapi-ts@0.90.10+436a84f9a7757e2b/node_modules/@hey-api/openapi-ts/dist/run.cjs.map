{"version":3,"file":"run.cjs","names":["config: Partial<UserConfig>","plugins: ToArray<UserConfig['plugins']>","pkg.bin","Command","pkg.version","createClient","CommanderError"],"sources":["../package.json","../src/cli/adapter.ts","../src/cli/index.ts","../src/run.ts"],"sourcesContent":["","import type { ToArray } from '@hey-api/types';\n\nimport type { UserConfig } from '~/config/types';\n\nimport type { CliOptions } from './schema';\n\nexport const cliToConfig = (cli: CliOptions): Partial<UserConfig> => {\n  const config: Partial<UserConfig> = {};\n\n  if (cli.input) config.input = cli.input;\n  if (cli.output) config.output = cli.output;\n  if (cli.file) config.configFile = cli.file;\n  if (cli.dryRun !== undefined) config.dryRun = cli.dryRun;\n\n  const plugins: ToArray<UserConfig['plugins']> = [];\n  if (cli.plugins instanceof Array && cli.plugins.length > 0) {\n    plugins.push(...cli.plugins);\n  }\n  if (cli.client) plugins.push(cli.client);\n  if (plugins.length > 0) config.plugins = plugins;\n\n  if (cli.debug || cli.silent || cli.logs || cli.logFile !== undefined) {\n    config.logs = {\n      ...(cli.logs && { path: cli.logs }),\n      ...(cli.debug && { level: 'debug' as const }),\n      ...(cli.silent && { level: 'silent' as const }),\n      ...(cli.logFile !== undefined && { file: cli.logFile }),\n    };\n  }\n\n  if (cli.watch !== undefined) {\n    if (typeof cli.watch === 'string') {\n      config.watch = Number.parseInt(cli.watch, 10);\n    } else {\n      config.watch = cli.watch;\n    }\n  }\n\n  return config;\n};\n","import { Command, CommanderError } from 'commander';\n\nimport { createClient } from '~/index';\n\nimport pkg from '../../package.json' assert { type: 'json' };\nimport { cliToConfig } from './adapter';\n\nconst binName = Object.keys(pkg.bin)[0]!;\n\nconst program = new Command()\n  .name(binName)\n  .description('Generate TypeScript code from OpenAPI specifications')\n  .version(pkg.version);\n\nprogram\n  .option(\n    '-i, --input <path...>',\n    'OpenAPI specification (path, URL, or string)',\n  )\n  .option('-o, --output <path...>', 'Output folder(s)')\n  .option('-c, --client <name>', 'HTTP client to generate')\n  .option('-p, --plugins [names...]', 'Plugins to use')\n  .option('-f, --file <path>', 'Path to config file')\n  .option('-d, --debug', 'Enable debug logging')\n  .option('-s, --silent', 'Suppress all output')\n  .option('-l, --logs <path>', 'Logs folder path')\n  .option('--no-log-file', 'Disable log file output')\n  .option('--dry-run', 'Skip writing files')\n  .option('-w, --watch [interval]', 'Watch for changes')\n  .action(async (options) => {\n    const config = cliToConfig(options);\n\n    const context = await createClient(\n      config as Parameters<typeof createClient>[0],\n    );\n\n    const hasActiveWatch = context[0]?.config.input.some(\n      (input) => input.watch?.enabled,\n    );\n\n    if (!hasActiveWatch) {\n      process.exit(0);\n    }\n  });\n\nexport async function runCli(): Promise<void> {\n  try {\n    await program.parseAsync(process.argv);\n  } catch (error) {\n    if (error instanceof CommanderError && 'code' in error) {\n      if (error.code === 'commander.optionMissingArgument') {\n        console.error(\n          `\\nMissing required argument. Run '${binName} --help' for usage.\\n`,\n        );\n      } else if (error.code === 'commander.unknownOption') {\n        console.error(\n          `\\nUnknown option. Run '${binName} --help' for available options.\\n`,\n        );\n      }\n\n      process.exit(error.exitCode);\n    }\n\n    console.error('Unexpected error:', error);\n    process.exit(1);\n  }\n}\n","#!/usr/bin/env node\n\nimport { runCli } from '~/cli';\n\nrunCli();\n"],"mappings":";;;;;;;;;;;;;;ACMA,MAAa,eAAe,QAAyC;CACnE,MAAMA,SAA8B,EAAE;AAEtC,KAAI,IAAI,MAAO,QAAO,QAAQ,IAAI;AAClC,KAAI,IAAI,OAAQ,QAAO,SAAS,IAAI;AACpC,KAAI,IAAI,KAAM,QAAO,aAAa,IAAI;AACtC,KAAI,IAAI,WAAW,OAAW,QAAO,SAAS,IAAI;CAElD,MAAMC,UAA0C,EAAE;AAClD,KAAI,IAAI,mBAAmB,SAAS,IAAI,QAAQ,SAAS,EACvD,SAAQ,KAAK,GAAG,IAAI,QAAQ;AAE9B,KAAI,IAAI,OAAQ,SAAQ,KAAK,IAAI,OAAO;AACxC,KAAI,QAAQ,SAAS,EAAG,QAAO,UAAU;AAEzC,KAAI,IAAI,SAAS,IAAI,UAAU,IAAI,QAAQ,IAAI,YAAY,OACzD,QAAO,OAAO;EACZ,GAAI,IAAI,QAAQ,EAAE,MAAM,IAAI,MAAM;EAClC,GAAI,IAAI,SAAS,EAAE,OAAO,SAAkB;EAC5C,GAAI,IAAI,UAAU,EAAE,OAAO,UAAmB;EAC9C,GAAI,IAAI,YAAY,UAAa,EAAE,MAAM,IAAI,SAAS;EACvD;AAGH,KAAI,IAAI,UAAU,OAChB,KAAI,OAAO,IAAI,UAAU,SACvB,QAAO,QAAQ,OAAO,SAAS,IAAI,OAAO,GAAG;KAE7C,QAAO,QAAQ,IAAI;AAIvB,QAAO;;;;;AC/BT,MAAM,UAAU,OAAO,KAAKC,IAAQ,CAAC;AAErC,MAAM,UAAU,IAAIC,mBAAS,CAC1B,KAAK,QAAQ,CACb,YAAY,uDAAuD,CACnE,QAAQC,QAAY;AAEvB,QACG,OACC,yBACA,+CACD,CACA,OAAO,0BAA0B,mBAAmB,CACpD,OAAO,uBAAuB,0BAA0B,CACxD,OAAO,4BAA4B,iBAAiB,CACpD,OAAO,qBAAqB,sBAAsB,CAClD,OAAO,eAAe,uBAAuB,CAC7C,OAAO,gBAAgB,sBAAsB,CAC7C,OAAO,qBAAqB,mBAAmB,CAC/C,OAAO,iBAAiB,0BAA0B,CAClD,OAAO,aAAa,qBAAqB,CACzC,OAAO,0BAA0B,oBAAoB,CACrD,OAAO,OAAO,YAAY;AAWzB,KAAI,EARY,MAAMC,yBAFP,YAAY,QAAQ,CAIlC,EAE8B,IAAI,OAAO,MAAM,MAC7C,UAAU,MAAM,OAAO,QACzB,CAGC,SAAQ,KAAK,EAAE;EAEjB;AAEJ,eAAsB,SAAwB;AAC5C,KAAI;AACF,QAAM,QAAQ,WAAW,QAAQ,KAAK;UAC/B,OAAO;AACd,MAAI,iBAAiBC,4BAAkB,UAAU,OAAO;AACtD,OAAI,MAAM,SAAS,kCACjB,SAAQ,MACN,qCAAqC,QAAQ,uBAC9C;YACQ,MAAM,SAAS,0BACxB,SAAQ,MACN,0BAA0B,QAAQ,mCACnC;AAGH,WAAQ,KAAK,MAAM,SAAS;;AAG9B,UAAQ,MAAM,qBAAqB,MAAM;AACzC,UAAQ,KAAK,EAAE;;;;;;AC5DnB,QAAQ"}